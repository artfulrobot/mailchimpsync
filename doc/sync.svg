<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: A Pages: 1 -->
<svg width="484pt" height="455pt"
 viewBox="0.00 0.00 484.00 455.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 451)">
<title>A</title>
<polygon fill="#eeeeee" stroke="transparent" points="-4,4 -4,-451 480,-451 480,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<path fill="#ffee88" stroke="#444444" d="M253,-447C253,-447 223,-447 223,-447 217,-447 211,-441 211,-435 211,-435 211,-423 211,-423 211,-417 217,-411 223,-411 223,-411 253,-411 253,-411 259,-411 265,-417 265,-423 265,-423 265,-435 265,-435 265,-441 259,-447 253,-447"/>
<text text-anchor="middle" x="238" y="-425.3" font-family="Lato" font-size="14.00" fill="#000000">Start</text>
</g>
<!-- processFetchMailchimp -->
<g id="node2" class="node">
<title>processFetchMailchimp</title>
<polygon fill="#ffffff" stroke="#444444" points="436,-375 40,-375 40,-337 436,-337 436,-375"/>
<text text-anchor="middle" x="238" y="-359.8" font-family="Lato" font-size="14.00" fill="#000000">Fetch Mailchimp data for list</text>
<text text-anchor="middle" x="238" y="-344.8" font-family="Lato" font-size="14.00" fill="#000000">Update existing/create new cache rows based on email hash</text>
</g>
<!-- start&#45;&gt;processFetchMailchimp -->
<g id="edge1" class="edge">
<title>start&#45;&gt;processFetchMailchimp</title>
<path fill="none" stroke="#000000" d="M238,-410.9551C238,-403.2107 238,-393.9622 238,-385.2811"/>
<polygon fill="#000000" stroke="#000000" points="241.5001,-385.1128 238,-375.1128 234.5001,-385.1129 241.5001,-385.1128"/>
</g>
<!-- process2 -->
<g id="node3" class="node">
<title>process2</title>
<polygon fill="#ffffff" stroke="#444444" points="461,-301 15,-301 15,-263 461,-263 461,-301"/>
<text text-anchor="middle" x="238" y="-285.8" font-family="Lato" font-size="14.00" fill="#000000">check pre&#45;existing contact_ids</text>
<text text-anchor="middle" x="238" y="-270.8" font-family="Lato" font-size="14.00" fill="#000000">set them NULL if they belong to deleted contacts or no longer exist.</text>
</g>
<!-- processFetchMailchimp&#45;&gt;process2 -->
<g id="edge2" class="edge">
<title>processFetchMailchimp&#45;&gt;process2</title>
<path fill="none" stroke="#000000" d="M238,-336.9432C238,-329.1493 238,-319.9538 238,-311.3381"/>
<polygon fill="#000000" stroke="#000000" points="241.5001,-311.2494 238,-301.2495 234.5001,-311.2495 241.5001,-311.2494"/>
</g>
<!-- process3 -->
<g id="node4" class="node">
<title>process3</title>
<polygon fill="#ffffff" stroke="#444444" points="476,-227 0,-227 0,-144 476,-144 476,-227"/>
<text text-anchor="middle" x="238" y="-211.8" font-family="Lato" font-size="14.00" fill="#000000">populate missing contactID by email matching first of:</text>
<text text-anchor="middle" x="238" y="-196.8" font-family="Lato" font-size="14.00" fill="#000000">1. email owned by one unique not&#45;deleted contact</text>
<text text-anchor="middle" x="238" y="-181.8" font-family="Lato" font-size="14.00" fill="#000000">2. lowest contact ID of not&#45;deleted contact in the group</text>
<text text-anchor="middle" x="238" y="-166.8" font-family="Lato" font-size="14.00" fill="#000000">3. lowest contact ID of not&#45;deleted contact previously in group</text>
<text text-anchor="middle" x="238" y="-151.8" font-family="Lato" font-size="14.00" fill="#000000">4. lowest contact ID of not&#45;deleted contact who has never been in group</text>
</g>
<!-- process2&#45;&gt;process3 -->
<g id="edge3" class="edge">
<title>process2&#45;&gt;process3</title>
<path fill="none" stroke="#000000" d="M238,-262.9347C238,-255.5117 238,-246.6126 238,-237.5337"/>
<polygon fill="#000000" stroke="#000000" points="241.5001,-237.276 238,-227.276 234.5001,-237.276 241.5001,-237.276"/>
</g>
<!-- process4 -->
<g id="node5" class="node">
<title>process4</title>
<polygon fill="#ffffff" stroke="#444444" points="453.5,-108 22.5,-108 22.5,-72 453.5,-72 453.5,-108"/>
<text text-anchor="middle" x="238" y="-86.3" font-family="Lato" font-size="14.00" fill="#000000">create new CiviCRM contacts for any remaining mailchimp emails</text>
</g>
<!-- process3&#45;&gt;process4 -->
<g id="edge4" class="edge">
<title>process3&#45;&gt;process4</title>
<path fill="none" stroke="#000000" d="M238,-143.8901C238,-135.3201 238,-126.4817 238,-118.5041"/>
<polygon fill="#000000" stroke="#000000" points="241.5001,-118.2651 238,-108.2651 234.5001,-118.2651 241.5001,-118.2651"/>
</g>
<!-- process5 -->
<g id="node6" class="node">
<title>process5</title>
<polygon fill="#ffffff" stroke="#444444" points="307.5,-36 168.5,-36 168.5,0 307.5,0 307.5,-36"/>
<text text-anchor="middle" x="238" y="-14.3" font-family="Lato" font-size="14.00" fill="#000000">Loop cache records</text>
</g>
<!-- process4&#45;&gt;process5 -->
<g id="edge5" class="edge">
<title>process4&#45;&gt;process5</title>
<path fill="none" stroke="#000000" d="M238,-71.8314C238,-64.131 238,-54.9743 238,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="241.5001,-46.4132 238,-36.4133 234.5001,-46.4133 241.5001,-46.4132"/>
</g>
</g>
</svg>
